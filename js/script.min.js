let serverURL,serverPort,url;$.ajax({url:"config.json",type:"GET",dataType:"json",success:function(e){serverURL=e.SERVER_URL,serverPort=e.SERVER_PORT,url=`${e.SERVER_URL}:${e.SERVER_PORT}`,showWorkCards()},error:function(){console.log("cannot find config.json file, cannot run application")}}),showWorkCards=(()=>{$.ajax({url:`${url}/allWork`,type:"GET",dataType:"json",success:function(e){$("#workList").empty(),console.log(e);for(var o=0;o<e.length;o++){let t=`<div class="col-12 col-sm-6 col-md-4 mb-3 mt-3 text-center" data-id=${e[o]._id}>\n                        <div class="card h-100">\n                        <div class="card-body">\n                          <img src="${e[o].imageUrl}" class="card-img-top" alt="">\n                          <h5 class="card-title">${e[o].title}</h5>\n                          <h6 class="card-subtitle mb-2 text-muted">${e[o].author}</h6>\n                          <a href="${e[o].url}"><p class="card-text">Click here to check out the website!</p></a>`;sessionStorage.username&&sessionStorage.userID===e[o].user_id&&(t+='<button type="button" class="btn btn-secondary">Edit</button>\n                                          <button type="button" class="btn btn-secondary">Delete</button>'),t+="</div>\n                                  </div>\n                                  </div>",$("#workList").append(t)}},error:function(e){console.log(e),console.log("something went wrong with getting all the products")}})}),$(document).ready(function(){console.log(sessionStorage),sessionStorage.userName?(console.log("you are now logged in"),$("#modalBtn").hide(),$("#logoutBtn").removeClass("d-none"),$("#addWorkSection").removeClass("d-none")):console.log("please sign in")}),$("#addWorkItemBtn").click(function(){event.preventDefault();let e=$("#workTitleInput").val(),o=$("#workImageURLInput").val(),t=$("#workAuthorInput").val(),n=$("#workURLInput").val();0===e.length?console.log("Please give a title for this project"):0===o.length?console.log("Please give an image URL for this project"):0===t.length?console.log("Please give an author for this project"):0===n.length?console.log("Please give a URL for this project"):$.ajax({url:`${url}/addWorkItem`,type:"POST",data:{title:e,imageUrl:o,author:t,url:n,userId:sessionStorage.userID},success:function(e){$("#workTitleInput").val(null),$("#workImageURLInput").val(null),$("#workAuthorInput").val(null),$("#workURLInput").val(null),console.log(sessionStorage.userID),$("#workList").append(`<div class="col-12 col-sm-6 col-md-4 mb-3 mt-3 text-center">\n                          <div class="card h-100">\n                          <div class="card-body">\n                            <img src="${e.imageUrl}" class="card-img-top" alt="">\n                            <h5 class="card-title">${e.title}</h5>\n                            <h6 class="card-subtitle mb-2 text-muted">${e.author}</h6>\n                            <a href="${e.url}"><p class="card-text">Click here to check out the website!</p></a>\n                            <button type="button" class="btn btn-secondary">Edit</button>\n                            <button type="button" class="btn btn-secondary">Delete</button></div></div></div>`)},error:function(e){console.log(e),console.log("oops, something went wrong")}})}),$("#workList").on("click",".editBtn",function(){if(event.preventDefault(),!sessionStorage.userId)return void alert("401, permission denied");const e=$(this).parent().parent().data("id");$.ajax({url:`${url}/work/${e}`,type:"post",data:{userId:sessionStorage.userId},dataType:"json",success:function(e){console.log(e),$("#workTitleInput").val(e.name),$("#workImageURLInput").val(e.imageUrl),$("#workAuthorInput").val(e.author),$("#workURLInput").val(e.url),$("#workID").val(e._id),$("#addWorkItemBtn").text("Edit Work").addClass("btn-warning"),$("#heading").text("Edit Work"),editing=!0},error:function(e){console.log(e),console.log("something went wrong with getting the single product")}})}),$("#modalBtn").click(function(){$("#authForm").modal("show")}),$("#loginTabBtn").click(function(){event.preventDefault(),$(".nav-link").removeClass("active"),$(this).addClass("active"),$("#loginForm").show(),$("#registerForm").hide()}),$("#registerTabBtn").click(function(){event.preventDefault(),$(".nav-link").removeClass("active"),$(this).addClass("active"),$("#loginForm").hide(),$("#registerForm").removeClass("d-none").show()}),$("#registerForm").submit(function(){event.preventDefault();let e=$("#registerUsername").val(),o=$("#registerEmail").val(),t=$("#registerPassword").val(),n=$("#confirmPassword").val();0===e.length?console.log("please enter a username for register"):0===o.length?console.log("please enter a password for register"):0===t.length?console.log("please enter an email"):0===n.length?console.log("please confirm a password"):t!==n?console.log("your password does not match your confirm password"):$.ajax({url:`${url}/users`,type:"POST",data:{username:e,email:o,password:t},success:function(e){console.log(e)},error:function(e){console.log(e),console.log("something went wrong with register a new user")}})}),$("#loginForm").submit(function(){event.preventDefault();let e=$("#loginUsername").val(),o=$("#loginPassword").val();0===e.length?console.log("please enter a username"):0===o.length?console.log("please enter a password"):$.ajax({url:`${url}/loginUser`,type:"POST",data:{username:e,password:o},success:function(e){"invalid user"===e?console.log("cannot fnd user with that username"):"invalid password"===e?console.log("password is incorrect"):(console.log("let us log you in"),console.log(e),sessionStorage.setItem("userID",e._id),sessionStorage.setItem("userName",e.username),sessionStorage.setItem("userEmail",e.email),$("#authForm").modal("hide"),$("#modalBtn").hide(),$("#logoutBtn").removeClass("d-none"),$("#addWorkSection").removeClass("d-none"))},error:function(e){console.log(e),console.log("there was an error with logging in")}})}),$("#logoutBtn").click(function(){sessionStorage.clear(),$("#modalBtn").show(),$("#logoutBtn").addClass("d-none"),console.log(sessionStorage),$("#addWorkSection").addClass("d-none")});